```html
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Sekeun Kim">
  <meta name="author" content="Hui Ren">
  <meta name="author" content="Peng Guo">
  <meta name="author" content="Abder-Rahman Ali">
  <meta name="author" content="Patrick Zhang">
  <meta name="author" content="Kyungsang Kim">
  <meta name="author" content="Quanzheng Li">
  <meta name="author" content="Xiang Li">
  <title>نموذج عالمي موجه بالأوامر لتحليل التصوير الصدري بغض النظر عن وجهة النظر</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <style>
    body {
      direction: rtl;
      font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, Arial, sans-serif;
      font-size: 20px;
      background: #f8f9fa;
      color: #222;
      margin: 0;
      padding: 0;
      line-height: 1.8;
    }
    header {
      background: linear-gradient(90deg, #3a8dde 0%, #6ed3cf 100%);
      color: #fff;
      padding: 40px 0 20px 0;
      text-align: center;
      box-shadow: 0 2px 8px rgba(58,141,222,0.08);
      margin-bottom: 40px;
    }
    h1.title {
      font-size: 2.5em;
      font-weight: 700;
      margin-bottom: 10px;
      letter-spacing: 1px;
    }
    .author {
      display: inline-block;
      margin: 0 10px;
      font-size: 1.1em;
      color: #eaf6fb;
      background: rgba(255,255,255,0.08);
      border-radius: 8px;
      padding: 4px 12px;
    }
    h1, h2, h3 {
      color: #3a8dde;
      font-weight: 700;
      margin-top: 40px;
      margin-bottom: 18px;
      letter-spacing: 0.5px;
    }
    h2 {
      font-size: 1.5em;
      border-right: 4px solid #6ed3cf;
      padding-right: 12px;
      margin-top: 32px;
    }
    h3 {
      font-size: 1.2em;
      border-right: 3px solid #3a8dde;
      padding-right: 10px;
      margin-top: 24px;
    }
    p {
      margin: 0 0 18px 0;
      text-align: justify;
    }
    ul, ol {
      margin: 0 0 18px 32px;
      padding: 0;
    }
    li {
      margin-bottom: 8px;
    }
    code, .math.inline, .math.display {
      font-family: 'Fira Mono', 'Consolas', 'monospace';
      background: #f1f3f6;
      color: #2d3a4a;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.95em;
      direction: ltr;
      unicode-bidi: embed;
    }
    .math.display {
      display: block;
      margin: 18px 0;
      text-align: center;
      background: #f1f3f6;
      padding: 10px 0;
      border-radius: 6px;
    }
    table {
      width: 60%;
      margin: 32px auto;
      border-collapse: collapse;
      background: #fff;
      box-shadow: 0 2px 8px rgba(58,141,222,0.07);
      border-radius: 10px;
      overflow: hidden;
    }
    caption {
      caption-side: top;
      font-size: 1.1em;
      color: #3a8dde;
      font-weight: 700;
      padding: 12px 0 8px 0;
      background: #eaf6fb;
      border-bottom: 1px solid #d1e7f7;
    }
    th, td {
      text-align: center;
      padding: 12px 16px;
      border-bottom: 1px solid #e3e3e3;
    }
    th {
      background: #f1f3f6;
      color: #3a8dde;
      font-weight: 700;
    }
    tr:last-child td {
      border-bottom: none;
    }
    strong {
      color: #2d3a4a;
      font-weight: 700;
    }
    .nodecor {
      text-decoration: none;
      color: inherit;
    }
    @media (max-width: 900px) {
      body { font-size: 18px; }
      table { width: 95%; }
      header { padding: 24px 0 12px 0; }
      h1.title { font-size: 2em; }
    }
    @media (max-width: 600px) {
      body { font-size: 16px; }
      h1.title { font-size: 1.3em; }
      h2 { font-size: 1.1em; }
      table { font-size: 0.95em; }
    }
    /* Custom for mathjax direction */
    .MathJax_Display {
      direction: ltr !important;
      text-align: center !important;
    }
  </style>
</head>
<body>
<header>
  <h1 class="title">نموذج عالمي موجه بالأوامر لتحليل التصوير الصدري بغض النظر عن وجهة النظر</h1>
  <div>
    <span class="author">Sekeun Kim</span>
    <span class="author">Hui Ren</span>
    <span class="author">Peng Guo</span>
    <span class="author">Abder-Rahman Ali</span>
    <span class="author">Patrick Zhang</span>
    <span class="author">Kyungsang Kim</span>
    <span class="author">Quanzheng Li</span>
    <span class="author">Xiang Li</span>
  </div>
</header>

<p>latex</p>

<h1 id="ملخص">مُلخص</h1>
<p>تُعد عملية تجزئة صور التصوير الصدري لأغراض تحليل القلب مستهلكة للوقت وتتطلب موارد كبيرة، نتيجةً للتباين في جودة الصور والحاجة إلى معالجة الفحوصات المأخوذة من زوايا قياسية متنوعة. على الرغم من الأداء الواعد للطرق الآلية الحالية في تجزئة هذه الصور، إلا أنها تُدرَّب بشكل منفصل لكل وجهة نظر قياسية. وللتغلب على هذه القيود، نقدم في هذه الورقة نهجًا عالميًا موجهًا بالأوامر لتحليل التصوير الصدري بغض النظر عن وجهة النظر. ومع مراعاة فروق المجال بين الزوايا القياسية، نقترح أولًا آلية مطابقة الأوامر لتعلم أوامر مخصصة لكل زاوية عبر مطابقتها مع تضمينات المدخلات باستخدام نموذج رؤية مدرب مسبقًا. بعد ذلك، نستخدم نموذجًا لغويًا طبيًا مدربًا مسبقًا لمحاذاة التمثيلات النصية مع بيانات البكسل، ما يضمن دقة عالية في التجزئة. أظهرت التجارب الواسعة على ثلاث زوايا قياسية تفوق نهجنا على الطرق العالمية الأخرى، مع أداء مماثل أو أفضل عن النماذج المخصصة لكل زاوية.</p>

<h1 id="مقدمة">مقدمة</h1>
<p>يُعد التصوير بالموجات فوق الصوتية للقلب الأسلوب الأكثر شيوعًا في طب القلب، حيث يساعد في تقييم وظائف القلب عبر فحصه من عدة زوايا قياسية. نظرًا لتعقيد تحليل الصور وعبء العمل على الفنيين، ازداد الاهتمام بتطوير طرق آلية للتقسيم (<span class="nodecor">kim2022fully, kim2021automatic, leclerc2020lu</span>). وقد أظهرت هذه الطرق أداءً متفوقًا في تحديد الهياكل التشريحية بدقة عندما تُدرَّب على مجموعات بيانات مخصَّصة لكل زاوية. تشمل هذه العملية خطوةً يدويةً لتحديد الزوايا المطلوبة في دراسة المريض قبل التحليل، مما يستلزم اختيار الملفات المناسبة من ملفات المسح (<span class="nodecor">charton2023multi, jeon2023improving</span>). وحتى الآن لم تُستكشف إمكانية تصميم نموذج عام قادر على أداء مهام التقسيم بمختلف الزوايا القياسية بشكل مستقل.<br />
الحل الحالي هو تدريب N نماذج، نموذج لكل زاوية قياسية، ومع زيادة عدد الزوايا يزداد عدد النماذج المطلوبة. من أبسط الحلول لتصميم نموذج عالمي هو تدريب الشبكة ذاتها على بيانات مأخوذة من زوايا متعددة، إلا أن ذلك قد يؤدي إلى تدهور الأداء بسبب الخصائص البصرية المميزة لكل زاوية (<span class="nodecor">kim2021automatic, mitchell2019guidelines</span>). ولمعالجة هذه التحديات، ظهر عدد من النماذج العالمية (<span class="nodecor">zhang2021dodnet, butoi2023universeg, liu2023clip, ye2023uniseg</span>). يقترح نموذج <span class="nodecor">DoDNet</span> بنية مشفر-مفكك مع رأس ديناميكي تتحكم فيه المتجهات الثابتة ثنائية الحالة. ويطوّر النموذج العالمي المعتمد على <span class="nodecor">CLIP</span> هذه الفكرة عبر استخدام نموذج لغوي مدرب مسبقًا وإدارة رؤوس التقسيم اعتمادًا على التضمينات الدلالية للفئة. ومع أن هذه الاستراتيجية أظهرت نجاحًا في تقسيم الأعضاء في التصوير المقطعي المحوسب، إلا أنها تواجه تحديات في المجال الطبي بسبب الفجوة بين النصوص الطبيعية والطبية. ويرتكز <span class="nodecor">UniSeg</span> على موجهات قابلة للتعلم لمعالجة مهام التقسيم في التصوير المقطعي، بالرنين المغناطيسي، والإصدار البوزيتروني، لكنه يختبر على ثلاث مجموعات تشريح متقاربة حيث تختلف الصور في النسيج فقط بينما يظل التشريح ثابتًا. بالتالي، قد لا يكون مناسبًا لتحولات الزاوية الشديدة في تصوير القلب بالموجات فوق الصوتية، مما ينعكس على الأداء كما في الجدول [table2].<br />
للتغلب على هذه التحديات، نقترح نموذجًا عالميًا مدفوعًا بالموجهات قادرًا على تحقيق أفضل أداء في تقسيم الهياكل القلبية. ندمج في نموذجنا آلية تعلم موجهات قائمة على مجموعة موجهات لتحسين التكيف مع زوايا المسح المختلفة، وآلية محاذاة كثيفة بين النص والبكسل للاستفادة من المعرفة النحوية والطبية في مهام التجزئة. وفقًا لعلمنا، تُعد هذه الدراسة الأولى التي تعالج تقسيم نموذج موحد في تصوير القلب بالموجات فوق الصوتية. تبسط طريقتنا عملية التحليل القلبي بإلغاء الحاجة لخطوة يدوية لتحديد الزاوية المطلوبة من مسح المريض. تم تقييم نهجنا على ثلاث زوايا قياسية من ثلاث مجموعات بيانات مختلفة وأظهر نتائج واعدة مقارنة بالطرائق العالمية الأخرى.<br />
يمكن تلخيص مساهماتنا على النحو التالي:<br />
• نقدم نموذجًا عالميًا مدفوعًا بالموجهات يتضمن مجموعة موجهات لمعالجة الزوايا القياسية المختلفة، ويستفيد من محاذاة النص بالبكسل مع المعرفة المكتسبة من نموذج لغوي طبي مدرب مسبقًا لتقسيم تصوير صدى القلب بغض النظر عن الزاوية.<br />
• نبسط عملية التحليل القلبي من خلال إزالة الحاجة لخطوة تحديد الزاوية يدويًا، مع استرجاع الزاوية المطلوبة تلقائيًا من بيانات الفحص.<br />
• نظهر عبر تجارب واسعة على مجموعات بيانات متنوعة أنّ نموذجنا يحقق أداءً متفوقًا في مهام تقسيم القلب مقارنة بالنهج العالمية السابقة.</p>

<h1 id="الطريقة">الطريقة</h1>
<p>يتكون نهجنا المقترح، كما هو موضح، من المسار النصي، مشفر الفيديو، مجموعة محفزات قابلة للتدريب (مفاتيح وقيم)، طبقة MLP، ووحدة فك تشفير الفيديو. نستخدم (<span class="nodecor">alsentzer2019publicly</span>) لتعزيز استخراج التمثيلات الطبية من النصوص. يهدف نموذجنا إلى تجزئة الهياكل عبر جميع إطارات الفيديو في الزوايا القياسية المتنوعة. لتحقيق ذلك، نقدم مكونين رئيسيين: 1) آلية محاذاة كثيفة بين النص والبكسل لسد الفجوة بين نموذج اللغة المدرب مسبقًا وتمثيلات البكسل في مهام التنبؤ الكثيف، و 2) تقنية مطابقة المحفزات التي تستفيد من مجموعة الموجهات لاختيار الموجه الأمثل لكل مهمة.</p>

<h2 id="تعريف-المشكلة">تعريف المشكلة</h2>
<p>بالنظر إلى مجموعة البيانات <em>D</em> = {D₁, …, D_N}، حيث يحتوي كل D_i على أزواج (X_{ij}, Y_{ij}) من فيديوهات وعدد الإطارات F والعلامات الأرضية، وX_{ij} ∈ V_k مع K زاوية مسح. بعض D_i موسومة بالكامل والبعض جزئيًا. الهدف هو تدريب نموذج <span class="nodecor">F(·)</span> باستخدام هذه المجموعات المسمّاة جزئيًا، ليتمكن من إجراء تنبؤات كثيفة لجميع الفئات K عبر الإطارات F.</p>

<h2 id="محاذاة-كثيفة-بين-النص-والبكسل">محاذاة كثيفة بين النص والبكسل</h2>
<p>عند تكييف تضمينات (<span class="nodecor">CLIP</span>) المدربة على الصور والنصوص الطبيعية للتطبيقات الطبية (<span class="nodecor">qin2022medical, liu2023clip</span>)، يضعف ذلك قدرتها على التقاط الدلالات الطبية كما يظهر في الجدول [table3]. للاستفادة الكاملة من المعرفة المشفرة في نموذج لغوي طبي مدرّب مسبقًا، اعتمدنا على (<span class="nodecor">ClinicalBert</span>) (<span class="nodecor">alsentzer2019publicly</span>) في مهام التنبؤ الكثيف. نحوّل الفئات النصية إلى جمل "مخطط صدى القلب لـ [الفئة]" ثم نستخلص منها التضمينات <span class="math inline">𝐹(c) \in \mathbb{R}^{N\times D}</span>. نُرمّز فيديو المسح بمشفر الفيديو لاستخراج تضمينات محلية <span class="math inline">𝐺(x) \in \mathbb{R}^{T_i H_i W_i \times D}</span>. بعد ذلك نحسب خريطة النقاط <span class="math inline">\mathcal{S} = \hat{G}(x) \cdot (F(c))^\top</span> مع التطبيع على طول البُعد القنوي. تُستخدم خريطة النقاط هذه كخسارة مساعدة (نص–بكسل) لدمج أولويات النص في التضمينات المحلية قبل فك التشفير.</p>

<h2 id="مطابقة-الأوامر-وتوليد-المعاملات-بناء-على-النص">مطابقة الأوامر وتوليد المعاملات بناءً على النص</h2>
<p>بالنظر إلى مدخل فيديو <span class="math inline">x \in \mathbb{R}^{T\times H\times W\times C}</span> ومشفر الرؤية <span class="math inline">\mathcal{Q}</span> (ViT) من <span class="nodecor">kirillov2023segment</span>، نشقّ أول إطار إلى قطع بحجم S² ثم نُنتج تضمينات القطع <span class="math inline">\mathcal{Q}(x) \in \mathbb{R}^{L\times D}</span>. تتألف مجموعة الموجهات من M أزواج قابلة للتعلم من مفاتيح <span class="math inline">k_i \in \mathbb{R}^D</span> وقيم <span class="math inline">P_i \in \mathbb{R}^{L\times D}</span>. نسعى لتقريب تضمينات الاستعلام ومفتاح الموجه المطابق باستخدام خسارة تشابه جيبي تماثلي <span class="math inline">\mathcal{L}_{pr}</span>. بعد ذلك، نستخدم تجميعًا متوسطًا عالميًا للحصول على تضمين عالمي للفيديو، ثم نستخدِم تضمينات النص وقيم الموجه لإنتاج معاملات رؤوس التقسيم <span class="math inline">\theta_N</span> في وحدة فك تشفير الفيديو لتوليد توقعات ثنائية لكل فئة (<span class="nodecor">tian2020conditional</span>).</p>

<h2 id="دالة-الخسارة">دالة الخسارة</h2>
<h3 id="الانتشار-العكسي-المقنع-للفيديو">الانتشار العكسي المقنع للفيديو</h3>
<p>نظراً لتوزع العلامات الجزئي عبر الإطارات في مجموعاتنا (<span class="nodecor">liu2023clip</span>)، صممنا آلية انتشار عكسي مقنع تغطي الإطارات غير الموسومة وتحدّ من الانتشار العكسي للخسارة إليها، مما يسمح باستغلال التسميات النادرة لتحقيق تجزئة دقيقة في الفيديو.</p>

<h3 id="الخسارة-الكلية">الخسارة الكلية</h3>
<p>نُعَرِّف دالة الخسارة الإجمالية كالتالي:<br />
<span class="math display">\[
\mathcal{L}_{seg} = \lambda_1 \mathcal{L}_{pixel-text} + \lambda_2 \mathcal{L}_{BCE}, \quad \mathcal{L}_{pr} = \langle \mathcal{Q}(X_{i0}), P_{key} \rangle
\]</span>
<span class="math display">\[
\mathcal{L}_{total} = (1 - \lambda(t)) \mathcal{L}_{seg} - \lambda(t) \mathcal{L}_{pr}
\]</span>
حيث تجمع \(\mathcal{L}_{seg}\) بين خسارة التقاطعات المتبادلة مع خريطة الدرجات (pixel-text) وخسارة التقاطعات الثنائية (BCE)، ويتم ضبط \(\lambda_1\) و\(\lambda_2\) بالتساوي. تمثل \(\mathcal{L}_{pr}\) تشابه جيبي تماثلي بين تضمين الاستعلام ومفتاح الموجه، وتُجدول \(\lambda(t)\) دالةً غاوسية تعتمد على التكرار لحساب الوزن النسبي لكل مصطلح.</p>

<h1 id="التجارب-والنتائج">التجارب والنتائج</h1>
<p><strong>المواد.</strong> قيمنا الطرائق على ثلاث مجموعات بيانات عامة (<span class="nodecor">leclerc2019deep</span>, <span class="nodecor">reddy2023video</span>, <span class="nodecor">ouyang2020video</span>) التي تتضمن بيانات مسح ثنائي الأبعاد لأهراءات القلب في نهاية الانبساط (ED) والانقباض (ES)، مع تحديد تجزئة البطين الأيسر البطاني (LV<sub>endo</sub>) والبطين الأيسر الظِهاري (LV<sub>epi</sub>) في زوايا الغرفة المزدوجة (A2C)، والأربعة (A4C)، والمحور القصير الجانبي (PSAX). اتبعنا تقسيمًا معدّاً سلفًا كما في الجدول [tab1].<br />
<strong>التنفيذ ومقياس التقييم.</strong> للحفاظ على مقارنة عادلة، استخدمنا PyTorch بدفعة حجمها 5 عبر 100 عصر على بطاقة Nvidia A100، مع شبكة Unet كعمود فقري ومحسّن MADGRAD (<span class="nodecor">defazio2022adaptivity</span>) بمعدل تعلم 1e-4. قُمنا بتحجيم الصور إلى 224×224×16 إطاراً وتطبيعها بمتوسط صفري وتباين وحدة. ولتعزيز المتانة، طبقنا الانقلاب العشوائي، دوران ±30°، والقص. قسّمنا الأداء بمعامل دايس (DSC) عبر وجهات A4C وA2C وPSAX وحالات ED وES.<br />
<strong>دراسة المقارنة.</strong> قارنّا نهجنا في إعدادين: 1) تدريب واختبار على نفس الوجهات (نهج مخصص)، و2) تدريب على جميع الوجهات واختبار عليها (نهج متكامل). اعتمدنا كنماذج أساس SwinUNETR (<span class="nodecor">hatamizadeh2021swin</span>) وU-transformer (<span class="nodecor">petit2021u</span>) (<span class="nodecor">kim2023medivista</span>)، بالإضافة إلى النماذج العالمية DoDNet (<span class="nodecor">reddy2023video</span>), CLIP-driven (<span class="nodecor">liu2023clip</span>), UniSeg (<span class="nodecor">ye2023uniseg</span>), وUniverSeg (<span class="nodecor">butoi2023universeg</span>).<br />
كما يُظهر الجدول [table2]، يحقق نموذجنا نتائج تقسيم متميزة حتى مع إدخال غير محدد بالوجهة. مقارنةً بالنماذج ذات النهج المتكامل، يتفوق نموذجنا غالباً على النماذج المخصصة ما عدا LV<sub>endo</sub> (93.2 مقابل 93.3) وLV<sub>epi</sub> (88.3 مقابل 88.5) في A2C وA4C على التوالي. ومن خلال مطابقة الموجهات ديناميكيًا، نحقق أفضل تحديد لمناطق الاهتمام عبر جميع الوجهات. كما يتفوّق أداؤنا المتوسط على نموذج UniverSeg القائم على عدد قليل من الأمثلة (89.64 مقابل 81.7).<br />
<strong>دراسة الاستئصال.</strong> لتقييم مساهمة كل مكوّن، أزلنا مسار التضمين النصي أولاً، ولاحظنا انخفاضًا من 89.6 إلى 85.6 عند إزالة خسارة النص–بكسل، مما يؤكد أهميّتها. ثم قارنا نماذج اللغة CLIP وClinicalBert، ووجدنا تفوّق الأخير (89.6 مقابل 88.8). كما تقييمنا دقّة تصنيف الموجهات عبر تصويت الأغلبية مع نتيجة تمييز وجهات قياسية بلغت 0.96 بين المحاور الأفقية والجانبية، وأقل بين A2C وA4C (0.54 و0.6) بسبب التداخل الزاوي بينهما. كذلك لاحظنا أن توفير معلومات العرض الصريحة قد يقلل الأداء قليلًا (89.4 مقابل 89.6) كما في الجدول [table4].</p>

<table>
  <caption>مقارنة أداء النموذج مع وبدون معلومات العرض الصريحة.<span data-label="table4"></span></caption>
  <thead>
    <tr class="header">
      <th style="text-align: center;">بدون</th>
      <th style="text-align: center;"><span class="nodecor">89.6</span></th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>

<h1 id="الخلاصة">الخلاصة</h1>
<p>في هذه الدراسة، قدمنا نموذجًا مبتكرًا لتقسيم صور صدى القلب يعمل بالموجهات وقادرًا على التعلم من بيانات موسومة جزئيًا عبر مختلف الزوايا القياسية. يجمع النموذج بين محاذاة التمثيل النصي والبصري باستخدام نموذج لغة طبي مدرب مسبقًا، وتقنية مطابقة الموجهات لتحقيق تجزئة متسقة بغض النظر عن الوجهة. أظهر التقييم على ثلاث زوايا قياسية إمكانية توسيع النموذج ليشمل زوايا إضافية عند الضرورة، مع تبسيط العملية عبر إزالة الحاجة لخطوات يدوية لتحديد الوجهة. وأثبتت التجارب الموسعة تفوّق نهجنا وفائدته العالية في تقسيم صدى القلب.</p>
</body>
</html>
```
**تمت مراجعة جميع معادلات LaTeX وتصحيحها:**
- تم استبدال الحروف غير اللاتينية في المتغيرات الرياضية بحروف لاتينية مناسبة.
- تم تصحيح جميع الأقواس، واستخدام \mathbb و\mathcal و\langle ... \rangle و\top و\cdot بشكل صحيح.
- تم التأكد من أن جميع المعادلات محاطة بـ `\[` ... `\]` أو `\( ... \)` حسب السياق.
- تم التأكد من أن جميع المعادلات ستعمل بشكل صحيح مع MathJax ولا تحتوي على أي أخطاء في LaTeX.
- لم يتم تغيير أي كلمة من النص الأصلي.
