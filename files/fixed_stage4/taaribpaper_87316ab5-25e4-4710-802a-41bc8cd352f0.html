<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ملاحظات حول بناء أنظمة RAG للوثائق الفنية</title>

  <!-- Google Font for Arabic -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

  <!-- MathJax for equations -->
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" async></script>

  <!-- Styles -->
  <style>
    /* Reset & Base */
    *, *::before, *::after { box-sizing: border-box; }
    body {
      margin: 2rem auto;
      max-width: 800px;
      font-family: 'Cairo', sans-serif;
      line-height: 1.6;
      font-size: 20px;
      color: #333;
      background: #fafafa;
    }
    h1, h2, h3 { color: #2a2a2a; margin-top: 2rem; margin-bottom: .5rem; }
    h1 { font-size: 2.2rem; border-bottom: 2px solid #ddd; padding-bottom: .3rem; }
    h2 { font-size: 1.6rem; border-bottom: 1px solid #eee; padding-bottom: .2rem; }
    h3 { font-size: 1.3rem; }
    p { margin: 1rem 0; text-align: justify; }
    ul, ol { margin: .5rem 0 1rem 1.5rem; }
    li { margin-bottom: .5rem; }
    code { background: #f0f0f0; padding: .2rem .4rem; border-radius: 4px; font-family: monospace; }
    pre { background: #f9f9f9; padding: 1rem; overflow-x: auto; border-radius: 4px; border: 1px solid #e5e5e5; }
    a { color: #0077cc; text-decoration: none; }
    a:hover { text-decoration: underline; }
    .title { text-align: center; margin-bottom: .5rem; }
    .author { text-align: center; font-size: 1.1rem; color: #555; }
    nav.toc { background: #fff; border: 1px solid #ddd; padding: 1rem; border-radius: 4px; margin-bottom: 2rem; }
    nav.toc ul { list-style: none; padding: 0; }
    nav.toc li { margin: .3rem 0; }
    .nodecor { font-weight: 700; }
    .math.inline { font-style: normal; background: #efefef; padding: 0 .2rem; border-radius: 4px; }
    @media (max-width: 600px) {
      body { margin: 1rem; font-size: 18px; }
      h1 { font-size: 1.8rem; }
      h2 { font-size: 1.4rem; }
    }
  </style>
</head>

<body>

  <header>
    <h1 class="title">ملاحظات حول بناء أنظمة <span class="nodecor">RAG</span> للوثائق الفنية</h1>
    <p class="author"><span class="nodecor">Sumit Soman</span> و <span class="nodecor">Sujoy Roychowdhury</span></p>
  </header>

  <nav class="toc">
    <strong>جدول المحتويات</strong>
    <ul>
      <li><a href="#ملخص">ملخص</a></li>
      <li><a href="#مقدمة">مقدمة</a></li>
      <li><a href="#الإعداد-التجريبي">الإعداد التجريبي</a></li>
      <li><a href="#الملاحظات">الملاحظات</a></li>
      <li><a href="#ملخص-الملاحظات">ملخص الملاحظات</a></li>
      <li><a href="#الاستنتاجات">الاستنتاجات والأعمال المستقبلية</a></li>
      <li><a href="#تعليمات-التنسيق-العامة">تعليمات التنسيق العامة</a></li>
      <li><a href="#app:appA">الملحق أ</a></li>
      <li><a href="#app:appB">الملحق ب</a></li>
      <li><a href="#app:appC">الملحق ج</a></li>
    </ul>
  </nav>

  <main>

    <section id="ملخص">
      <h2>ملخص</h2>
      <p>تطرح عملية توليد الاسترجاع المعزز (<span class="nodecor">RAG</span>) للوثائق الفنية تحديات، حيث إن التضمينات غالباً لا تلتقط المعلومات المتعلقة بالمجال بشكل كافٍ. نستعرض الأعمال السابقة حول العوامل المهمة التي تؤثر على <span class="nodecor">RAG</span> ونُجري تجارب لتسليط الضوء على أفضل الممارسات والتحديات المحتملة في بناء أنظمة <span class="nodecor">RAG</span> للوثائق الفنية.</p>
    </section>

    <section id="مقدمة">
      <h2>مقدمة</h2>
      <p>تتطلب الإجابة على الأسئلة المطوّلة توليد استجابات بحجم فقرة باستخدام نماذج اللغة الكبيرة. تواجه أنظمة <span class="nodecor">RAG</span> للوثائق الفنية تحديات عديدة (<span class="nodecor">xu2023retrieval</span>، <span class="nodecor">toro2023dynamic</span>). لقد تم تقييم العوامل التي تؤثر على أداء الاسترجاع، بما في ذلك وضع الوثائق في سياقها، ونماذج اللغة الكبيرة، والمقاييس المختلفة (<span class="nodecor">chen2023understanding</span>). ولتوسيع هذا العمل، نُجري تجارب على وثائق فنية تتعلق بمصطلحات الاتصالات والبطاريات لفحص تأثير طول القطعة، وطرق البحث المعتمدة على الكلمات الرئيسية، وترتيب النتائج المسترجعة في خط أنابيب <span class="nodecor">RAG</span>.</p>
    </section>

    <section id="الإعداد-التجريبي">
      <h2>الإعداد التجريبي</h2>
      <p>تعتمد تجاربنا على مواصفات الطبقة الفيزيائية وطبقة التحكم في الوصول إلى الوسائط لشبكة IEEE اللاسلكية (<span class="nodecor">9363693</span>)، والمعجم القياسي لمصطلحات البطاريات الثابتة لـ IEEE (<span class="nodecor">7552407</span>). نقوم بمعالجة معجم التعريفات والوثيقة الكاملة بشكل منفصل، لأن العديد من الأسئلة المتوقعة تستند إلى التعريفات. نستخرج الأسئلة استناداً إلى خبرتنا التخصصية ونقدم تقارير عن النتائج التجريبية لـ <span class="nodecor">42</span> استفسارًا تمثيليًا عبر كلا الوثيقتين. يمكن استخدام نماذج تضمين متعددة ومتنوعة (<span class="nodecor">reimers2019sentence</span>)، ونستخدم آلية MPNET (<span class="nodecor">song2020mpnet</span>) لتمثيل الوثيقة الكاملة – باستثناء الجداول والتعليقات التوضيحية. بالنسبة للمعجم، نقسم المصطلح والتعريف ونولد تضمينات منفصلة لكل منهما، بالإضافة إلى تضمين الفقرة الكاملة التي تحتوي عليهما. استعرض (<span class="nodecor">soman2023observations</span>) نماذج اللغة الكبيرة الأخرى في قطاع الاتصالات، لكننا اخترنا نموذج <span class="nodecor">llama2-7b-chat</span> (<span class="nodecor">touvron2023llama</span>) لأنه مجاني ويحمل تراخيص مناسبة للاستخدام التجاري. نقيم أداء النموذج استناداً إلى عدة أسئلة ونقدم تقارير عن النتائج المختارة لتأكيد ملاحظاتنا. للأمانة، يتم توفير الأوامر المستخدمة لنموذج اللغة الكبير في الملحق <a href="#app:appA">[app:appA]</a>.</p>
    </section>

    <section id="الملاحظات">
      <h2>الملاحظات</h2>
      <p>لاحظنا أولاً أن موثوقية تضمينات الجمل تنخفض مع زيادة طول القطعة. يوضح الملحق <a href="#app:appB">[app:appB]</a> في الشكل <a href="#fig:kde_chunk">[fig:kde_chunk]</a> تقدير التوزيع الكثافي لنواقل التشابه الجيبي الكلي لمختلف أطوال القطع. أخذنا <span class="nodecor">10,970</span> جملة ونظرنا في التشابه الزوجي بينها جميعًا؛ فلوحظ أن التشابه العالي يظهر مع القطع الأطول نسبياً. تشير توزيعات التشابه الأعلى للأطوال الكبيرة إلى وجود تشابهات زائفة، وقد تحققنا منها يدوياً لعينة عشوائية. وجدنا أنه عندما يزيد طول كل من الاستعلام والوثيقة التي يُستعلم عنها عن <span class="nodecor">200</span> كلمة، يظهر توزيع ثنائي القمم. وإذا زاد أحدهما فقط عن هذا الحد، يظهر ارتفاع بسيط عند التشابهات العالية، لكنه أقل وضوحاً.</p>
    </section>

    <section id="ملخص-الملاحظات">
      <h2>ملخص الملاحظات – تفاصيل الاستفسارات الفردية في الملحق <a href="#app:appB">[app:appB]</a></h2>
      <p>يقدم الجدول <a href="#tab:observations">[tab:observations]</a> فرضياتنا والملاحظات الرئيسية، وأُرفقت استفسارات العينة ونتائجها في الملحق <a href="#app:appC">[app:appC]</a>. نفترض أن الفصل بين التعريفات والمصطلحات يمكن أن يحسّن نتائج الاسترجاع (<span class="nodecor">H1</span>)، وأن درجات التشابه معيار مناسب (<span class="nodecor">H2</span>)، وأن موقع الكلمات الرئيسية يؤثر على النتائج (<span class="nodecor">H3</span>)، وأن الاسترجاع المعتمد على الجملة يُحسّن الأداء (<span class="nodecor">H4</span>) ويعزّز التوليد (<span class="nodecor">H5</span>)، وأن الإجابات المتعلقة بالتعريفات الناتجة عن الاختصارات لها خصائص محددة (<span class="nodecor">H6</span>)، وأن ترتيب النتائج المسترجعة يؤثر على أداء المولد (<span class="nodecor">H7</span>). من بين هذه الفرضيات، يستند <span class="nodecor">H2</span> إلى تجاربنا مع توزيعات درجات التشابه المشار إليها أعلاه، ويعتمد <span class="nodecor">H7</span> على (<span class="nodecor">chen2023understanding</span>). أما البقية، فاستخلصناها من تجاربنا لتحسين النتائج. في العمود الأخير، نعرض عدد التجارب الداعمة لتلك الفرضيات وعدد التجارب غير الداعمة، إلى جانب استفسارات العينة.</p>
      <p>وجدنا أن الاسترجاع بناءً على ترتيب درجات التشابه ليس مفيداً دائماً. بالنسبة للاستفسارات <span class="nodecor">1</span> و <span class="nodecor">2</span> و <span class="nodecor">5</span>، يكون أعلى ترتيب عندما تحتوي عبارة الاستعلام على المصطلح أو التعريف. أما في الاستفسار <span class="nodecor">3</span>، فقد ظهرت النتيجة الصحيحة في المرتبة الثانية عند استخدام تضمين التعريف، بينما لم تظهر في مرات أخرى بسبب تقارب الدرجات. وبالنسبة للاستفسارات <span class="nodecor">4</span> و <span class="nodecor">6</span>، لم نتمكن من استرجاع النتيجة الصحيحة رغم إشارة الدرجات إلى احتماليتها. بالتالي، قد يؤدي اختيار النتائج بناءً على درجات التشابه إلى تحسين أداء المولد بصورة غير مستقرة. نقيم أداء المولد على استفساراتنا اعتماداً على النتائج المسترجعة، وذلك باستخدام أعلى <span class="math inline">\(k\)</span> نتائج مسترجعة من (أ) التعريفات، و(ب) المصطلحات والتعريفات معاً. ويوفر السياق الأنسب استجابات مولدة أفضل. وفيما يخص الاختصارات وتوسعاتها، لم يضف المولد قيمة إضافية.</p>
      <p>لاسترجاع الوثيقة الكاملة، نستكشف طريقتين للبحث: البحث المبني على التشابه على مستوى الجملة والبحث على مستوى الفقرة. في الطريقة الأولى، نحدد الفقرة التي تنتمي إليها الجملة ثم نجمع أعلى <span class="math inline">\(k\)</span> فقرات متميزة استناداً إلى الجمل الأكثر تشابهاً. نلاحظ أن البحث المبني على التشابه على مستوى الجملة مع استخدام الفقرات كمدخل للمولد يوفر أداءً أفضل في الاسترجاع والتوليد. يشير (<span class="nodecor">chen2023understanding</span>) إلى أهمية ترتيب المعلومات المقدمة، لكننا لم نر اختلافاً جوهرياً عند تبديل ترتيب الفقرات المسترجعة. ولاحظنا أحياناً فشل استجابات المولد بسبب استرجاع نتيجة غير صحيحة، أو بسبب حقائق متوهمة، أو توليف غير سليم.</p>
      <p>نوصي باعتماد هذه الأساليب عند إعداد الأسئلة والإجابات المطوّلة في الوثائق الفنية، حيث توفر إحكاماً في استرجاع المعلومات ودقة في التوليد.</p>
    </section>

    <section id="الاستنتاجات">
      <h2>الاستنتاجات والأعمال المستقبلية</h2>
      <p>لقد أظهرنا أن طول القطعة يؤثر بشكل ملحوظ على جودة تضمينات أداة الاسترجاع، وأن تعزيز المولد باختيار النتائج استناداً إلى درجات التشابه قد يكون أقل موثوقية. ومع ذلك، تبقى لملاحظاتنا أهمية خاصة عند التعامل مع الأسئلة والإجابات المطوّلة في الوثائق الفنية، خاصة عند استخدام الاختصارات وحين تتوفر العديد من الفقرات المرتبطة بموضوع معين. كأعمال مستقبلية، نود استخدام مقاييس إضافية (<span class="nodecor">es2023ragas</span>، <span class="nodecor">chen2023benchmarking</span>) لاختيار استراتيجيات الاسترجاع الأنسب، كما نهدف إلى تطوير طرق ومقاييس تقييم تلبي احتياجات الأسئلة التالية.</p>
    </section>

    <section id="تعليمات-التنسيق-العامة">
      <h2>تعليمات التنسيق العامة</h2>
      <h3>الاقتباسات داخل النص</h3>
      <p>يجب أن تستند الاستشهادات داخل النص إلى حزمة <code>natbib</code> وتتضمن أسماء عائلات المؤلفين والسنة (مع استخدام بناء “وآخرون” لأكثر من مؤلفين اثنين). عندما يتم ذكر المؤلفين أو النشر ضمن الجملة، يجب ألا يكون الاستشهاد بين قوسين باستخدام <code>\citet{}</code> (كما في “انظر (<span class="nodecor">Hinton06</span>) للمزيد من المعلومات.”). وإلا، يجب أن يكون الاستشهاد بين قوسين باستخدام <code>\citep{}</code> (كما في “تظهر التعلم العميق وعداً لتحقيق تقدم نحو الذكاء الاصطناعي (<span class="nodecor">Bengio+chapter2007</span>).”).</p>
      <p>يجب أن تُدرج المراجع المقابلة بترتيب أبجدي لأسماء المؤلفين، في قسم <span style="font-variant: small-caps;">المراجع</span>. بالنسبة لتنسيق المراجع نفسها، أي أسلوب مقبول طالما أنه مستخدم بشكل متسق.</p>
      <h3>الأشكال والجداول</h3>
      <p>جميع الجداول يجب أن تكون مركزة، نظيفة، وواضحة. لا تستخدم جداول مرسومة باليد. يجب أن يظهر رقم الجدول وعنوانه قبل الجدول نفسه. انظر الجدول <span class="nodecor">[sample-table]</span>.</p>
      <p>ضع مسافة سطر واحدة قبل عنوان الجدول، ومسافة سطر واحدة بعد عنوان الجدول، ومسافة سطر واحدة بعد الجدول. يجب أن يكون عنوان الجدول بأحرف صغيرة (ما عدا الكلمة الأولى والأسماء الخاصة)؛ ويتم ترقيم الجداول بشكل متسلسل.</p>
    </section>

    <section id="app:appA">
      <h2>الملحق أ</h2>
      <p>الأوامر المستخدمة للنموذج اللغوي الكبير في تجاربنا هي كما يلي:</p>
      <ul>
        <li>
          <p><strong>أمر النظام:</strong> أجب عن الأسئلة استناداً إلى الفقرات المقدمة هنا. لا تستخدم أي معلومات أخرى باستثناء تلك الموجودة في الفقرات. اجعل الإجابات قصيرة قدر الإمكان. فقط قدم الإجابة. لا مقدمة مطلوبة.</p>
        </li>
        <li>
          <p><strong>أمر المستخدم:</strong> “الفقرات: ” + context + “الأسئلة: ” + query</p>
        </li>
      </ul>
    </section>

    <section id="app:appB">
      <h2>الملحق ب</h2>
      <!-- المحتوى وفق المستند الأصلي -->
    </section>

    <section id="app:appC">
      <h2>الملحق ج – المواد التكميلية</h2>
      <p>نوفر <a href="https://anonymous.4open.science/r/RAG_ICLR-55CB/README.md" target="_blank">مستودع Git مجهول</a> يحتوي على:</p>
      <ul>
        <li>شفرة مصدرية مجهولة</li>
        <li>جدولة التجربة مقابل الفرضية (للنتائج الكمية الموحدة)</li>
        <li>تفاصيل التجارب عبر <span class="nodecor">42</span> استفسار و <span class="nodecor">7</span> فرضيات</li>
      </ul>
      <p>بالإضافة إلى ذلك، نوفر تفاصيل بخصوص الفرضيات في الجدول <a href="#tab:observations">[tab:observations]</a> من خلال تقديم استفسارات نموذجية والنتائج المسترجعة والمولدة.</p>
    </section>

  </main>
</body>
</html>