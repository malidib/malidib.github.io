<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Sumit Soman و Sujoy Roychowdhury">
  <title>ملاحظات حول بناء أنظمة RAG للوثائق التقنيّة</title>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
    html, body {
      font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, Arial, sans-serif;
      background: #f9f9fb;
      color: #222;
      font-size: 20px;
      line-height: 1.8;
      margin: 0;
      padding: 0;
      direction: rtl;
    }
    body {
      max-width: 900px;
      margin: 40px auto 40px auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.07);
      padding: 48px 36px 48px 36px;
    }
    header {
      border-bottom: 2px solid #e0e0e0;
      margin-bottom: 32px;
      padding-bottom: 16px;
      text-align: center;
    }
    h1.title {
      font-size: 2.5em;
      font-weight: 700;
      color: #2a3a5e;
      margin-bottom: 0.2em;
      letter-spacing: 0.01em;
    }
    .author {
      font-size: 1.2em;
      color: #555;
      margin-top: 0.5em;
      margin-bottom: 0;
    }
    h1, h2, h3 {
      color: #2a3a5e;
      font-weight: 700;
      margin-top: 2.2em;
      margin-bottom: 0.7em;
      line-height: 1.3;
    }
    h1 {
      font-size: 2em;
      border-right: 5px solid #e0e0e0;
      padding-right: 12px;
      background: linear-gradient(90deg, #e3eafc 60%, transparent 100%);
      border-radius: 8px 0 0 8px;
    }
    h2 {
      font-size: 1.4em;
      border-right: 3px solid #b3c6e0;
      padding-right: 10px;
      background: linear-gradient(90deg, #f3f7fd 60%, transparent 100%);
      border-radius: 6px 0 0 6px;
    }
    h3 {
      font-size: 1.1em;
      color: #3a4a6e;
      border-right: 2px solid #d0d8e8;
      padding-right: 8px;
      background: linear-gradient(90deg, #f7fafd 60%, transparent 100%);
      border-radius: 4px 0 0 4px;
    }
    p {
      margin: 1.1em 0;
      text-align: justify;
    }
    ul, ol {
      margin: 1.2em 2em 1.2em 0;
      padding-right: 1.5em;
    }
    ul li, ol li {
      margin-bottom: 0.5em;
    }
    code, pre {
      font-family: 'Fira Mono', 'Consolas', 'Courier New', monospace;
      background: #f4f4f8;
      color: #2a3a5e;
      border-radius: 5px;
      padding: 2px 6px;
      font-size: 0.95em;
    }
    pre {
      display: block;
      padding: 16px;
      margin: 1.5em 0;
      overflow-x: auto;
      background: #f4f4f8;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 0.98em;
      direction: ltr;
      text-align: left;
    }
    a {
      color: #1a6ed8;
      text-decoration: none;
      border-bottom: 1px dotted #1a6ed8;
      transition: border-bottom 0.2s;
    }
    a:hover {
      border-bottom: 1px solid #1a6ed8;
      color: #174a8c;
    }
    .nodecor {
      text-decoration: none !important;
      color: inherit !important;
      font-weight: 600;
    }
    em {
      color: #2a3a5e;
      font-style: italic;
    }
    table {
      border-collapse: collapse;
      margin: 1.5em auto;
      width: 95%;
      background: #f7fafd;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.03);
    }
    th, td {
      border: 1px solid #d0d8e8;
      padding: 10px 16px;
      text-align: center;
      font-size: 1em;
    }
    th {
      background: #e3eafc;
      color: #2a3a5e;
      font-weight: 700;
    }
    caption {
      caption-side: top;
      font-size: 1.1em;
      color: #3a4a6e;
      margin-bottom: 0.5em;
      font-weight: 600;
    }
    blockquote {
      border-right: 4px solid #b3c6e0;
      background: #f3f7fd;
      margin: 1.5em 0;
      padding: 1em 1.5em;
      color: #3a4a6e;
      border-radius: 8px;
      font-size: 1.05em;
    }
    /* MathJax direction fix for RTL */
    .MathJax_Display {
      direction: ltr !important;
      text-align: left !important;
    }
    /* Section spacing */
    h1:not(:first-child), h2, h3 {
      margin-top: 2.5em;
    }
    /* Appending a subtle divider for appendices */
    h1[id^="app:"] {
      border-top: 2px dashed #b3c6e0;
      padding-top: 1.5em;
      margin-top: 3em;
    }
    /* Responsive */
    @media (max-width: 700px) {
      body {
        padding: 18px 4vw 18px 4vw;
        font-size: 17px;
      }
      h1.title {
        font-size: 1.5em;
      }
      h1, h2, h3 {
        padding-right: 6px;
      }
      table {
        font-size: 0.95em;
      }
    }
  </style>
</head>
<body>
<header>
  <h1 class="title">ملاحظات حول بناء أنظمة <span class="nodecor">RAG</span> للوثائق التقنيّة</h1>
  <p class="author"><span class="nodecor">Sumit Soman</span> و <span class="nodecor">Sujoy Roychowdhury</span></p>
</header>
<p>نصّ مُنسَّق بلغة LaTeX</p>

<h1 id="ملخص">ملخص</h1>
<p>يطرح التوليد المُعزَّز بالاسترجاع (<span class="nodecor">RAG</span>) للوثائق التقنيّة تحدّياتٍ، إذ إنّ التمثيلات المُضمَّنة غالباً لا تلتقط المعلومات الخاصّة بالمجال بشكلٍ كافٍ. نُراجع الأعمال السابقة حول العوامل المؤثّرة في أنظمة <span class="nodecor">RAG</span>، ونُجري تجارب لتسليط الضوء على أفضل الممارسات والتحدّيات المحتملة في بناء أنظمة <span class="nodecor">RAG</span> للوثائق التقنيّة.</p>

<h1 id="مقدمة">مقدمة</h1>
<p>تتطلّب الإجابة عن الأسئلة المطوّلة توليد استجابات بحجم فقرة عبر النماذج اللغويّة الكبيرة (<span class="nodecor">LLMs</span>). وتواجه أنظمة <span class="nodecor">RAG</span> للوثائق التقنيّة تحدّيات عديدة (<span class="nodecor">xu2023retrieval</span>, <span class="nodecor">toro2023dynamic</span>). وقد جرى تقييم العوامل التي تؤثّر على أداء الاسترجاع، بما في ذلك تقطيع الوثائق ووضعها في سياقها، والنماذج اللغويّة الكبيرة، ومقاييس التقييم المختلفة (<span class="nodecor">chen2023understanding</span>). توسيعاً لهذا العمل، نُجري تجارب على وثائق تقنيّة تتعلّق بمصطلحات الاتصالات والبطّاريات لفحص أثر طول المقطع، وطرق البحث المعتمدة على الكلمات المفتاحيّة، وترتيب النتائج المسترجعة في خط أنابيب <span class="nodecor">RAG</span>.</p>

<h1 id="الإعداد-التجريبي">الإعداد التجريبي</h1>
<p>تعتمد تجاربنا على مواصفات الطبقة الفيزيائيّة وطبقة التحكّم في الوصول إلى الوسائط لشبكة <span class="nodecor">IEEE</span> اللاسلكيّة (<span class="nodecor">9363693</span>)، والمعجم القياسي لمصطلحات البطّاريات الثابتة لـ <span class="nodecor">IEEE</span> (<span class="nodecor">7552407</span>). نعالج معجم التعريفات والوثيقة الكاملة على نحوٍ منفصل، لأنّ كثيراً من الأسئلة المتوقّعة يستند إلى التعريفات. نستخرج الأسئلة استناداً إلى خبرتنا التخصّصيّة ونُبلغ عن النتائج التجريبيّة لـ <span class="nodecor">42</span> استفساراً تمثيليّاً عبر الوثيقتين. يمكن استخدام نماذج متعدّدة للتمثيلات المُضمَّنة (<span class="nodecor">reimers2019sentence</span>)، ونستخدم نموذج <span class="nodecor">MPNet</span> (<span class="nodecor">song2020mpnet</span>) لتمثيل الوثيقة الكاملة — باستثناء الجداول والتعليقات التوضيحيّة. أمّا في المعجم، فنقسّم المُصطلح وتعريفه ونُولِّد تمثيلات مُضمَّنة منفصلة لكلٍّ منهما، بالإضافة إلى تمثيل مُضمَّن للفقرة الكاملة التي تحتويهما.</p>
<p>استعرضت (<span class="nodecor">soman2023observations</span>) نماذج لغويّة كبيرة أخرى في قطاع الاتصالات، لكنّنا اخترنا نموذج <span class="nodecor">llama2-7b-chat</span> (<span class="nodecor">touvron2023llama</span>) لأنّه متاح مجاناً وبترخيص مناسب للاستخدام التجاري. نقيس أداء النموذج على مجموعة من الأسئلة ونُقدّم نتائج مختارة لتوكيد ملاحظاتنا. وللإنصاف، تُوفَّر الأوامر المستخدمة للنموذج اللغوي الكبير في <a href="#app:appA">الملحق [app:appA]</a>.</p>

<h1 id="الملاحظات">الملاحظات</h1>
<p>لاحظنا بدايةً أنّ موثوقيّة التمثيلات المُضمَّنة على مستوى الجملة تنخفض مع ازدياد طول المقطع. يوضّح <a href="#app:appB">الملحق [app:appB]</a> في الشكل <span class="nodecor">[fig:kde_chunk]</span> تقدير كثافة النواة (<span class="nodecor">KDE</span>) لتوزيع درجات تشابه جيب التمام على الأزواج المختلفة ولأطوال مقاطع متباينة. أخذنا <span class="nodecor">10,970</span> جملة ونظرنا في التشابه الزوجي بينها جميعاً؛ ولوحِظ أنّ التشابهات المرتفعة تظهر أكثر مع المقاطع الأطول نسبيّاً. وتشير التوزيعات الأعلى للتشابه عند الأطوال الكبيرة إلى وجود تشابهات زائفة، وقد تحقّقنا منها يدوياً على عيّنة. وجدنا أنّه عندما يزيد طول كلٍّ من الاستعلام والوثيقة المستعلَم عنها على <span class="nodecor">200</span> كلمة يظهر توزيع ثنائي القمّة؛ وإذا زاد أحدهما فقط عن هذا الحدّ يظهر ارتفاع طفيف عند التشابهات العالية، لكنّه أقلّ وضوحاً.</p>

<h1 id="ملخص-الملاحظات---تفاصيل-الاستفسارات-الفردية-في-الملحق-appappb">ملخّص الملاحظات — تفاصيل الاستفسارات الفرديّة في <a href="#app:appB">الملحق [app:appB]</a></h1>
<p>يقدّم الجدول <span class="nodecor">[tab:observations]</span> فَرَضيّاتنا والملاحظات الرئيسة؛ وقد أُرفقت استفسارات العيّنة ونتائجها في <a href="#app:appC">الملحق [app:appC]</a>. نفترض أنّ الفصل بين التعريفات والمصطلحات يمكن أن يُحسِّن نتائج الاسترجاع (<span class="nodecor">H1</span>)، وأنّ درجات التشابه معيار مناسب للانتقاء (<span class="nodecor">H2</span>)، وأنّ موقع الكلمات المفتاحيّة يؤثّر على النتائج (<span class="nodecor">H3</span>)، وأنّ الاسترجاع المعتمد على الجملة يُحسِّن الأداء (<span class="nodecor">H4</span>) ويُعزِّز التوليد (<span class="nodecor">H5</span>)، وأنّ إجابات التعريفات المتّصلة بتوسُّعات الاختصارات لها خصائص محدّدة (<span class="nodecor">H6</span>)، وأنّ ترتيب النتائج المسترجعة يؤثّر على أداء المُولِّد (<span class="nodecor">H7</span>). من بين هذه الفرضيّات، يستند <span class="nodecor">H2</span> إلى تجاربنا مع توزيعات درجات التشابه المُشار إليها أعلاه، ويعتمد <span class="nodecor">H7</span> على (<span class="nodecor">chen2023understanding</span>)، أمّا بقيّتها فاستخلصناها أثناء تحسين النتائج. في العمود الأخير، نعرض عدد التجارب المؤيِّدة لكلّ فرضيّة وعدد غير المؤيِّدة، مع استفسارات عيّنة.</p>

<p>وجدنا أنّ الاسترجاع وفق ترتيب درجات التشابه ليس مفيداً دائماً. ففي الاستفسارات <span class="nodecor">1</span> و<span class="nodecor">2</span> و<span class="nodecor">5</span>، يأتي أعلى ترتيب للوثائق عندما تحتوي عبارة الاستعلام على المصطلح أو التعريف صراحةً. أمّا في الاستفسار <span class="nodecor">3</span>، فظهرت النتيجة الصحيحة في المرتبة الثانية عند استخدام تمثيل التعريف المُضمَّن، بينما لم تظهر في مرات أخرى بسبب تقارب الدرجات. وفي الاستفسارين <span class="nodecor">4</span> و<span class="nodecor">6</span>، لم نتمكّن من استرجاع النتيجة الصحيحة رغم دلالة الدرجات على احتمال صحّتها. وعليه، قد يؤدّي اختيار النتائج المسترجعة بناءً على درجات التشابه إلى تحسين أداء المُولِّد بصورة غير مُستقرّة. نقيس أداء المُولِّد على استفساراتنا بناءً على ما يُسترجَع، مستخدمين أعلى <span class="math inline">\(k\)</span> مسترجعات من: (أ) التعريفات وحدها، و(ب) المصطلحات مع التعريفات. ويوفّر السياق الأنسب استجابات مُولَّدة أفضل. وبالنسبة للاختصارات وتوسُّعاتها، لم يُضِف المُولِّد قيمة إضافيّة.</p>

<p>لاسترجاع الوثيقة الكاملة، نستكشف طريقتيْ بحث: البحث المعتمد على التشابه على مستوى الجملة، والبحث على مستوى الفقرة. في الأولى، نحدِّد الفقرة التي تنتمي إليها الجملة ثم نجمع أعلى <span class="math inline">\(k\)</span> فقرات متميّزة من بين الجُمل الأكثر تشابهاً. نلاحظ أنّ البحث المعتمد على تشابه الجُمل مع استخدام الفقرات كمدخل للمُولِّد يوفّر أداءً أفضل في الاسترجاع والتوليد. وقد أشار (<span class="nodecor">chen2023understanding</span>) إلى أهميّة ترتيب المعلومات المُقدَّمة، لكنّنا لم نرَ اختلافاً جوهريّاً عند تبديل ترتيب الفقرات المسترجعة. كما لاحظنا أحياناً إخفاق استجابات المُولِّد بسبب استرجاع نتيجة غير صحيحة، أو بسبب هلوسات، أو بسبب تركيب/صياغة غير سليمة.</p>

<p>نُوصي باعتماد هذه الأساليب عند إعداد أسئلة وأجوبة مطوّلة في الوثائق التقنيّة، إذ تُحكِم الاسترجاع وتُحسِّن دقّة التوليد.</p>

<h1 id="الاستنتاجات-والأعمال-المستقبلية">الاستنتاجات والأعمال المستقبلية</h1>
<p>أظهرنا أنّ طول المقطع يؤثِّر بوضوح في جودة التمثيلات المُضمَّنة المُستخدمة في الاسترجاع، وأنّ تعزيز المُولِّد باختيار النتائج استناداً إلى درجات التشابه قد يكون أقلّ موثوقيّة. ومع ذلك، تبقى لملاحظاتنا أهميّة خاصّة عند التعامل مع الأسئلة والأجوبة المطوّلة في الوثائق التقنيّة، لا سيّما مع كثرة الاختصارات وتعدّد الفقرات المرتبطة بموضوع واحد. كأعمالٍ مستقبليّة، نودّ استخدام مقاييس إضافيّة (<span class="nodecor">es2023ragas, chen2023benchmarking</span>) لاختيار استراتيجيات الاسترجاع الأنسب، كما نهدف إلى تطوير أساليب ومقاييس تقييم تُلبّي متطلبات هذا النوع من الأسئلة.</p>

<h2 id="الأسلوب">الأسلوب</h2>

<h2 id="استرجاع-ملفات-النمط">استيراد ملفات الأنماط</h2>

<h1 id="تعليمات-التنسيق-العامة">تعليمات التنسيق العامة</h1>

<h1 id="العناوين-المستوى-الأول">العناوين: المستوى الأول</h1>

<h2 id="العناوين-المستوى-الثاني">العناوين: المستوى الثاني</h2>

<h3 id="العناوين-المستوى-الثالث">العناوين: المستوى الثالث</h3>

<h1 id="الاقتباسات-الأشكال-الجداول-المراجع">الاقتباسات، الأشكال، الجداول، المراجع</h1>

<h2 id="الاستشهادات-داخل-النص">الاستشهادات داخل النص</h2>
<p>يجب أن تستند الاستشهادات داخل النص إلى حزمة <code>natbib</code> وأن تتضمّن أسماء عائلة المؤلفين والسنة (مع استخدام “وآخرون” فيما يزيد على مؤلفَيْن). عندما يُذكَر المؤلفون ضمن الجملة، لا يوضع الاستشهاد بين قوسين، ويُستخدم <code>\citet{}</code> كما في: <code>\citet{Hinton06}</code>. أمّا إذا لم يُذكَروا ضمن النص فيُوضَع الاستشهاد بين قوسين باستخدام <code>\citep{}</code> كما في: <code>\citep{Bengio+chapter2007}</code>.</p>
<p>تُدرَج المراجع المقابلة أبجديّاً بحسب أسماء المؤلفين في قسم <span style="font-variant: small-caps;">المراجع</span>. وبالنسبة لتنسيق المراجع نفسها، فأيّ أسلوبٍ مقبول ما دام يُستخدم باتّساق.</p>

<h2 id="الحواشي-السفلية">الحواشي السفلية</h2>

<h2 id="الأشكال">الأشكال</h2>

<h2 id="الجداول">الجداول</h2>
<p>جميع الجداول يجب أن تكون مُحاذاة للوسط، نظيفة وواضحة. لا تُستخدم جداول مرسومة باليد. يجب أن يظهر رقم الجدول وعنوانه قبل الجدول نفسه. انظر الجدول <span class="nodecor">[sample-table]</span>.</p>
<p>اترك مسافة سطر واحدة قبل عنوان الجدول، ومسافة سطر واحدة بعد عنوانه، ومسافة سطر واحدة بعد الجدول. يجب أن يكون عنوان الجدول بحروف صغيرة (ما عدا الكلمة الأولى والأسماء الخاصّة)، وتُرقَّم الجداول تسلسليّاً.</p>

<h1 id="التدوين-الافتراضي">التدوين القياسي</h1>
<p>في محاولة لتشجيع تدوينٍ موحّد، أدرجنا ملف التدوين من الكتاب المدرسي <em>التعلّم العميق</em> (<span class="nodecor">goodfellow2016deep</span>). استخدام هذا الأسلوب ليس إلزاميّاً ويمكن تعطيله عن طريق التعليق على <code>math_commands.tex</code>.</p>

<h1 id="الأعداد-والمصفوفات">الأعداد والمصفوفات</h1>

<h1 id="المجموعات-والرسوم-البيانية">المجموعات والرسوم البيانية</h1>

<h1 id="الفهرسة">الفهرسة</h1>

<h1 id="التفاضل-والتكامل">التفاضل والتكامل</h1>

<h1 id="نظرية-الاحتمالات-والمعلومات">نظرية الاحتمالات والمعلومات</h1>

<h1 id="الدوال">الدوال</h1>

<h1 id="التعليمات-النهائية">التعليمات النهائية</h1>

<h1 id="إعداد-ملفات-بوست-سكريبت-أو-بي-دي-إف">إعداد ملفات بوست سكريبت أو بي دي إف</h1>
<p>يُرجى إعداد ملفات بوست سكريبت أو <span class="nodecor">PDF</span> بحجم الورق “US Letter”، وليس — على سبيل المثال — “A4”. إنّ الخيار <code>-t letter</code> في <code>dvips</code> يُنتج ملفات بحجم US Letter.</p>
<p>فكّر في إنشاء ملفات <span class="nodecor">PDF</span> مباشرةً باستخدام <span class="nodecor">pdflatex</span> (خاصّةً إذا كنت مستخدماً لـ <span class="nodecor">MiKTeX</span>). وفي هذه الحالة، تُستبدَل صور <span class="nodecor">EPS</span> بصور <span class="nodecor">PDF</span>.</p>
<p>وإلّا، فأنشئ ملفات بوست سكريبت و<span class="nodecor">PDF</span> باستخدام الأوامر التالية:</p>
<pre><code>dvips mypaper.dvi -t letter -Ppdf -G0 -o mypaper.ps
ps2pdf mypaper.ps mypaper.pdf</code></pre>

<h2 id="هوامش-في-latex">الهوامش في LaTeX</h2>

<h3 id="بيان-urm" class="unnumbered">بيان URM</h3>
<p>يُقِرّ الكتّاب بأنّ على الأقلّ أحد المؤلفين الرئيسيين لهذا العمل يلبّي معايير <span class="nodecor">URM</span> لمسار الأوراق الصغيرة في <span class="nodecor">ICLR 2024</span>.</p>

<h1 id="app:appA">الملحق أ</h1>
<p>الأوامر المستخدمة للنموذج اللغوي الكبير في تجاربنا هي على النحو الآتي:</p>
<ul>
  <li><p>أمر النظام: أجب عن الأسئلة استناداً إلى الفقرات المُقدَّمة هنا. لا تستخدم أي معلومات أخرى باستثناء ما يَرِد في الفقرات. اجعل الإجابات قصيرة قدر الإمكان. قدِّم الإجابة فقط، ولا حاجة إلى مقدّمة.</p></li>
  <li><p>أمر المستخدم: “الفقرات: ” + context + “الأسئلة: ” + query</p></li>
</ul>

<h1 id="app:appB">الملحق ب</h1>

<h1 id="app:appC">الملحق ج - المواد التكميلية</h1>
<p>نوفر <a href="https://anonymous.4open.science/r/RAG_ICLR-55CB/README.md">مستودع Git مجهول</a> يحتوي على:</p>
<ul>
  <li><p>شفرة مصدريّة مجهولة</p></li>
  <li><p>جدول يربط التجارب بالفَرَضيّات (للنتائج الكميّة الموحَّدة)</p></li>
  <li><p>تفاصيل التجارب عبر <span class="nodecor">42</span> استفساراً و<span class="nodecor">7</span> فَرَضيّات</p></li>
</ul>
<p>بالإضافة إلى ذلك، نوفر تفاصيل بخصوص الفَرَضيّات في الجدول <span class="nodecor">[tab:observations]</span> من خلال تقديم استفسارات نموذجيّة والنتائج المسترجعة والمُولَّدة.</p>
</body>
</html>