<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Sumit Soman و Sujoy Roychowdhury">
  <title>ملاحظات حول بناء أنظمة RAG للوثائق الفنية</title>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
    html, body {
      font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, Arial, sans-serif;
      background: #f8f9fa;
      color: #222;
      font-size: 22px;
      line-height: 1.7;
      margin: 0;
      padding: 0;
      direction: rtl;
    }
    header {
      background: linear-gradient(90deg, #e3e6f3 0%, #f8f9fa 100%);
      padding: 2.5rem 0 1.5rem 0;
      text-align: center;
      border-bottom: 2px solid #d1d5db;
      margin-bottom: 2rem;
    }
    h1.title {
      font-size: 2.5rem;
      font-weight: 700;
      color: #2a3a5e;
      margin-bottom: 0.5rem;
      letter-spacing: 0.02em;
    }
    .author {
      font-size: 1.2rem;
      color: #555;
      margin-bottom: 0.5rem;
    }
    h1, h2, h3 {
      color: #2a3a5e;
      margin-top: 2.2rem;
      margin-bottom: 1rem;
      font-weight: 700;
      line-height: 1.2;
    }
    h1 {
      font-size: 2rem;
      border-bottom: 1.5px solid #d1d5db;
      padding-bottom: 0.3rem;
    }
    h2 {
      font-size: 1.5rem;
      border-right: 4px solid #b6c3e2;
      padding-right: 0.7rem;
      margin-top: 2rem;
    }
    h3 {
      font-size: 1.2rem;
      color: #3b4a6b;
      margin-top: 1.5rem;
      margin-bottom: 0.7rem;
    }
    p {
      margin: 1.2rem 0;
      text-align: justify;
    }
    ul, ol {
      margin: 1.2rem 2.5rem 1.2rem 0;
      padding-right: 1.5rem;
    }
    ul li, ol li {
      margin-bottom: 0.7rem;
    }
    code, pre {
      font-family: 'Fira Mono', 'Consolas', 'Courier New', monospace;
      background: #f3f6fa;
      color: #1a2a3a;
      border-radius: 5px;
      padding: 0.2em 0.4em;
      font-size: 0.95em;
    }
    pre {
      background: #f3f6fa;
      padding: 1em 1.5em;
      overflow-x: auto;
      margin: 1.5em 0;
      border-right: 4px solid #b6c3e2;
    }
    a {
      color: #2a3a5e;
      text-decoration: underline;
      transition: color 0.2s;
    }
    a:hover {
      color: #1a2a3a;
      text-decoration: none;
    }
    .nodecor {
      text-decoration: none !important;
      color: inherit !important;
      font-weight: 700;
    }
    /* Table styling */
    table {
      border-collapse: collapse;
      width: 100%;
      margin: 2em 0;
      background: #fff;
      box-shadow: 0 2px 8px rgba(44, 62, 80, 0.04);
    }
    th, td {
      border: 1px solid #d1d5db;
      padding: 0.7em 1em;
      text-align: center;
    }
    th {
      background: #e3e6f3;
      color: #2a3a5e;
      font-weight: 700;
    }
    caption {
      caption-side: top;
      font-size: 1.1em;
      color: #3b4a6b;
      margin-bottom: 0.5em;
      font-weight: 600;
    }
    /* Section for appendices */
    [id^="app:"] {
      margin-top: 2.5em;
    }
    /* Small-caps for references */
    span[style*="font-variant: small-caps;"] {
      font-variant: small-caps;
      font-size: 1.1em;
      color: #2a3a5e;
    }
    /* Highlight math inline */
    .math.inline {
      background: #f3f6fa;
      padding: 0.1em 0.3em;
      border-radius: 3px;
      font-size: 0.98em;
      color: #1a2a3a;
    }
    /* Responsive */
    @media (max-width: 700px) {
      html, body {
        font-size: 18px;
      }
      header {
        padding: 1.2rem 0 1rem 0;
      }
      h1.title {
        font-size: 1.5rem;
      }
      h1, h2 {
        font-size: 1.2rem;
      }
      pre {
        font-size: 0.9em;
        padding: 0.7em 0.7em;
      }
    }
  </style>
</head>
<body>
<header>
  <h1 class="title">ملاحظات حول بناء أنظمة <span class="nodecor">RAG</span> للوثائق الفنية</h1>
  <p class="author"><span class="nodecor">Sumit Soman</span> و <span class="nodecor">Sujoy Roychowdhury</span></p>
</header>
<main>
<h1 id="ملخص">مُلَخَّص</h1>
<p>يطرح توليد المحتوى المُعزَّز بالاسترجاع (<span class="nodecor">RAG</span>) للوثائق الفنية تحدِّيات عدّة، إذ لا تلتقط التضميناتُ المعلوماتِ الخاصّة بالمجال بدقّة كافية. نستعرض الأدبيات السابقة حول العوامل المؤثِّرة في أداء <span class="nodecor">RAG</span>، ونُنفِّذ تجاربَ تكشف أفضل الممارسات والعثرات المحتملة عند بناء أنظمة <span class="nodecor">RAG</span> مُخصَّصة للوثائق الفنية.</p>

<h1 id="مقدمة">مقدمة</h1>
<p>تتطلّب الإجابةُ عن الأسئلة المطوَّلة استدعاءَ نماذجِ اللغة الكبيرة لتوليد استجاباتٍ بحجم فقرة. ويواجه الاسترجاعُ المُوجَّه للوثائق الفنية عدّة تحدِّيات (<span class="nodecor">xu2023retrieval</span>, <span class="nodecor">toro2023dynamic</span>). وقد قُيِّمت العواملُ المؤثِّرة في أداء الاسترجاع، بما في ذلك جودةُ التضمينات، ونماذجُ اللغة الكبيرة، ومقاييسُ التقييم (<span class="nodecor">chen2023understanding</span>). انطلاقاً من ذلك، نُجري تجاربَ على وثائق تغطّي مصطلحات الاتصالات ومعجمَ البطاريات الثابتة لفحص تأثير طول المقطع، والبحث المعتمد على الكلمات المفتاحية، وترتيب النتائج المسترجعة في خطِّ أنبوب <span class="nodecor">RAG</span>.</p>

<h1 id="الإعداد-التجريبي">الإعداد التجريبي</h1>
<p>تعتمد تجاربُنا على مواصفات الطبقة المتوسِّطة للتحكُّم في الوصول إلى الوسائط (<span class="nodecor">MAC</span>) والطبقة الفيزيائية (<span class="nodecor">PHY</span>) لشبكات <span class="nodecor">IEEE</span> اللاسلكية (<span class="nodecor">9363693</span>)، بالإضافة إلى معجم المصطلحات القياسي للبطاريات الثابتة الصادر عن <span class="nodecor">IEEE</span> (<span class="nodecor">7552407</span>). نُعالِج المعجمَ والوثيقةَ الكاملة بصورةٍ منفصلة، إذ تستندُ كثيرٌ من الأسئلة إلى التعريفات. نَستنبط الأسئلةَ بالاعتماد على المعرفة المجالية، ونُبلِّغ عن النتائج التجريبية لِـ<span class="nodecor">42</span> استفساراً تمثيلياً عبر الوثائق.</p>
<p>يمكن استخدام نماذج تضمينٍ متعدِّدة (<span class="nodecor">reimers2019sentence</span>)، وقد اخترنا <span class="nodecor">MPNET</span> (<span class="nodecor">song2020mpnet</span>) لمعالجة الوثيقة الكاملة — مع استثناء الجداول والحواشي. أمّا في حالة المعجم، فنقسِّم «المصطلح» و«التعريف» ونُولِّد تضميناتٍ مستقلّةً لكلٍّ منهما، إضافةً إلى تضمين الفقرة الكاملة التي تحتوي المصطلحَ وتعريفَه. وعلى الرغم من استعراض دراساتٍ سابقة (<span class="nodecor">soman2023observations</span>) لنماذج أخرى في قطاع الاتصالات، اخترنا نموذج <span class="nodecor">llama2-7b-chat</span> (<span class="nodecor">touvron2023llama</span>) لكونه مجّانياً ومرخَّصاً للاستخدام التجاري. ثم نقيس أداءَ النموذج في تجاربنا على مجموعةٍ من الأسئلة، مع استعراض أمثلةٍ منتقاة لتأكيد ملاحظاتنا. وللمرجع، تتوفّر أوامر نموذج اللغة الكبير في <a href="#app:appA">الملحق أ</a>.</p>

<h1 id="الملاحظات">الملاحظات</h1>
<p>بدايةً، لاحظنا أنّ تضمين الجُمل يفقد موثوقيّتَه كلّما ازداد طولُ المقطع النصّي. ويُظهر الرسمُ البياني لتقدير الكثافة النووية (<span class="nodecor">KDE</span>) لدرجات التشابه الجيبي الكلّي عبر أطوال الجمل في <a href="#app:appB">الملحق ب</a> هذا السلوك. أخذنا <span class="nodecor">10,970</span> جملة ودرسنا التشابهَ الزوجي بينها، فوجدنا درجاتِ تشابهٍ مرتفعةً للجُمل الأطول نسبياً. وتشير «توزيعات» التشابه الأعلى للأطوال الأكبر إلى وجود ارتباطاتٍ زائفة؛ وقد تحقّقنا من ذلك يدوياً على بعض العيّنات. عندما يحتوي الاستعلامُ والوثيقة معاً على أكثر من <span class="nodecor">200</span> كلمة، يصبح توزيع التشابه ثنائيَّ القِمّة؛ أمّا إنْ تجاوز أحدُهما فقط هذه العتبةَ، فيظهر ارتفاعٌ طفيف — لكن أقلّ وضوحاً — عند القيم العليا للتشابه.</p>

<h1 id="ملخص-الملاحظات">ملخّص الملاحظات</h1>
<p>يُلخِّص الجدول [tab:observations] فرضيّاتِنا وملاحظاتِنا الرئيسة. يمكن الاطّلاع على استفسارات العيّنة ونتائجها في <a href="#app:appC">الملحق ج</a>. نفترض ما يلي:</p>
<ul>
  <li>فصلُ المصطلحات عن التعريفات يُحسِّن الدقّةَ الاسترجاعية (H1).</li>
  <li>تتأثّر توزيعاتُ درجات التشابه بطول المقطع، ما يحدّ من موثوقيّتِها كمؤشِّرٍ وحيد للأداء (H2).</li>
  <li>موقعُ الكلمات المفتاحية في النصّ يؤثِّر في جودة النتائج (H3).</li>
  <li>الاسترجاعُ المعتمد على تشابه الجُمل يُفضي إلى استرجاعٍ وتوليدٍ أفضل (H4 و H5).</li>
  <li>للتعامل مع الاختصارات وتوسّعاتها أثرٌ خاصّ في الأداء (H6).</li>
  <li>إعادةُ ترتيب النتائج المسترجعة قد تُعزِّز فاعليةَ المولِّد (H7).</li>
</ul>
<p>من بين هذه الفرضيّات، تدعم H2 تحليلَ توزيع درجات التشابه، بينما تستند H7 إلى (<span class="nodecor">chen2023understanding</span>)، أمّا بقيّةُ الفرضيات فاستخلصناها من تجارب تحسين الأداء لدينا.</p>

<p>وجدنا أنّ الاسترجاع القائم على أعلى درجات التشابه ليس مفيداً دائماً. في الاستفسارات <span class="nodecor">1</span> و<span class="nodecor">2</span> و<span class="nodecor">5</span>، عندما تتطابقُ عبارةُ الاستعلام مع نصّ المصطلح أو التعريف، تكون النتيجةُ الأعلى درجةً هي الصحيحة. أمّا في الاستفسار <span class="nodecor">3</span>، فتظهر النتيجةُ الصحيحة في المرتبة الثانية باستخدام تضمينات «التعريف»، ولا تُسترجَع في الحالات الأخرى بسبب تكتُّل درجات التشابه. وفي الاستفسارين <span class="nodecor">4</span> و<span class="nodecor">6</span>، لم تنجح الاسترجاعاتُ على الرغم من ارتفاع الدرجات. لذا فإنّ اختيار عناصر المسترجِع استناداً إلى درجات التشابه لا يُحسِّن تلقائياً أداءَ المولِّد.</p>
<p>نقيس أداءَ المولِّد على استفساراتنا انطلاقاً من أعلى <span class="math inline">\(k\)</span> تضميناتٍ مُسترجَعة للمصطلحات والتعريفات، حيث يوفِّر السياقُ الأوسع إجاباتٍ أفضل. أمّا في حالة الاختصارات وتوسّعاتها، فلم يُضِف المولِّد قيمةً يُعتدُّ بها.</p>

<p>لاسترجاع الوثيقة كاملةً، نقارن بين بحث التشابه على مستوى الجُملة وعلى مستوى الفقرة. في الحالة الأولى، نسترجع الفقرةَ التي تنتمي إليها الجملة، ثم نختار أعلى <span class="math inline">\(k\)</span> فقراتٍ متميّزة وفقاً لتشابه جُملها. ونجد أنّ البحثَ المبني على التشابه الجُملي مع استخدام الفقرات في التوليد يحقّق أداءً أفضل في الاسترجاع والتوليد معاً. ذُكر في (<span class="nodecor">chen2023understanding</span>) أنّ ترتيبَ المعلومات المقدَّمة يؤثِّر في النتائج، لكنّنا لم نلحظ فروقاً ملحوظةً عند تبديل ترتيب الفقرات المسترجعة. أنماطُ الإخفاق في توليد الإجابات تنجم غالباً عن استرجاعٍ غير دقيق، أو حقائقَ زائفة، أو توليفٍ غير موفَّق، كما أوضح (<span class="nodecor">chen2023understanding</span>).</p>

<p>نوصي بهذه الأساليب عند إعداد أنظمة الأسئلة والأجوبة، ولا سيّما للتفاعلات المطوَّلة على الوثائق الفنية.</p>

<h1 id="الاستنتاجات-والأعمال-المستقبلية">الاستنتاجات والأعمال المستقبلية</h1>
<p>أظهرنا أنّ طولَ المقطع يؤثِّر في جودة التضمينات على مستوى المسترجِع، وأنّ تحسين أداء المولِّد بالاعتماد المباشر على درجات التشابه قد لا يكون موثوقاً. ومع ذلك، فإنّ التعامل مع الاختصارات واستخدام عددٍ أكبر من الفقرات ذات الصلة يجعل ملاحظاتِنا مهمّةً بوجهٍ خاصّ في سياق الأسئلة والأجوبة المطوّلة على الوثائق الفنية. في أعمالٍ لاحقة، نهدف إلى اعتماد مقاييس إضافية (<span class="nodecor">es2023ragas, chen2023benchmarking</span>) لاختيار استراتيجيات الاسترجاع، وتطوير أساليبَ ومقاييسَ لتقييم الإجابات اللاحقة.</p>

<h2 id="الأسلوب">الأسلوب</h2>
<p>اتبَعْنا نهجاً تجريبياً مقارناً، يُبدِّل مكوّنات خطّ أنبوب <span class="nodecor">RAG</span> (التضمين، الاسترجاع، ترتيب النتائج، التوليد) مع تثبيت باقي العوامل، لقياس الأثر الصافي لكلّ مكوّن على جودة الإجابة.</p>

<h2 id="استرجاع-ملفات-النمط">استرجاع ملفات النمط</h2>
<p>إنْ كنتَ تُقدِّم عملاً بصيغة <span class="nodecor">LaTeX</span>، فاحرص على استخدام ملفات النمط المعتمدة للإخراج المستهدف، والاحتفاظ بإعدادات الهوامش، وحجم الورق، والخطوط، كما هي. تجنّب التعديلات اليدوية التي قد تُخلّ باتّساق التنسيق النهائي.</p>

<h1 id="تعليمات-التنسيق-العامة">تعليمات التنسيق العامة</h1>
<p>احرص على وضوح النصّ، وتجنّب الإكثار من التنسيق اليدوي داخل الفقرات. استخدِم العناوينَ والمستوياتَ الهرميةَ على نحوٍ متّسق، وراعِ قواعدَ ترقيم الأشكال والجداول والمراجع.</p>

<h1 id="العناوين-المستوى-الأول">العناوين: المستوى الأول</h1>
<h2 id="العناوين-المستوى-الثاني">العناوين: المستوى الثاني</h2>
<h3 id="العناوين-المستوى-الثالث">العناوين: المستوى الثالث</h3>

<h1 id="الاستشهادات-الأشكال-الجداول-المراجع">الاستشهادات، الأشكال، الجداول، المراجع</h1>

<h2 id="الاستشهادات-داخل-النص">الاستشهادات داخل النص</h2>
<p>يجب أن تستند الاستشهادات داخل النص إلى حزمة <code>natbib</code> وأن تتضمّن أسماء عائلات المؤلِّفين والسنة (مع استخدام صيغة «وآخرون» لأكثر من مؤلِّفَيْن). عندما يُذكَر المؤلِّف أو النشر داخل الجملة يُستخدم <code>\citet{}</code> دون أقواس، كما في: انظر <code>\citet{Hinton06}</code> لمزيدٍ من المعلومات. وفي غير ذلك يكون الاستشهاد بين أقواس باستخدام <code>\citep{}</code>، كما في: «يُعدّ التعلّم العميق واعداً نحو الذكاء الاصطناعي <code>\citep{Bengio+chapter2007}</code>».</p>
<p>تُدرَج المراجع في نهاية الوثيقة بترتيبٍ أبجديّ لأسماء المؤلِّفين ضمن قسم <span style="font-variant: small-caps;">المراجع</span>. وأيُّ أسلوبٍ لتنسيق المراجع مقبولٌ بشرط الاتّساق.</p>

<h2 id="الحواشي-السفلية">الحواشي السفلية</h2>
<p>استخدِم الحواشيَ السفلية باعتدال لتوضيح نقاطٍ جانبية أو تعريف رموزٍ عند الحاجة، وتجنَّب تضمين مراجعاتٍ أو معادلاتٍ مطوّلة فيها.</p>

<h2 id="الأشكال">الأشكال</h2>
<p>يجب أن تكون الأشكالُ عاليةَ الدقّة، مع عناوينَ ومحاورَ ووسومٍ واضحة. اذكُرْ رقم الشكل وعنوانه أسفل الشكل، واذكرْه في النصّ قبل عرضه.</p>

<h2 id="الجداول">الجداول</h2>
<p>ينبغي أن تكون جميع الجداول مركّزةً ونظيفةً وواضحة. تجنّب الجداول المرسومة يدوياً. يجب أن يظهر رقمُ الجدول وعنوانُه قبل الجدول. انظر الجدول <span class="nodecor">[sample-table]</span>.</p>
<p>اتركْ مسافةَ سطرٍ واحدة قبل عنوان الجدول، ومسافةَ سطرٍ واحدة بعد العنوان، ومسافةَ سطرٍ واحدة بعد الجدول. يكون عنوانُ الجدول بأحرفٍ صغيرة (عدا الكلمة الأولى والأسماء الخاصّة)، وتُرقَّم الجداولُ تسلسلياً.</p>

<h1 id="التدوين-الافتراضي">التدوين الافتراضي</h1>
<p>احرص على اتّساق الرموز والاختصارات عبر المستند. عرِّفْ كلَّ رمزٍ عند ظهوره أوّلَ مرّة، واحتفِظ بجدول رموزٍ عند الحاجة في الملاحق.</p>

<h1 id="التعليمات-النهائية">التعليمات النهائية</h1>
<p>راجِعْ المستند مراجعةً لغويةً وعلمية شاملة. تأكّد من سلامة الروابط الداخلية والخارجية، وصحّة الإحالات إلى الأشكال والجداول والملاحق.</p>

<h1 id="إعداد-ملفات-postscript-أو-pdf">إعداد ملفات PostScript أو PDF</h1>
<p>يرجى إعداد ملفات <span class="nodecor">PostScript</span> أو <span class="nodecor">PDF</span> بحجم الورق «US Letter»، وليس مثلاً «A4». الخيار <code>-t letter</code> على <span class="nodecor">dvips</span> يُنتج ملفات «US Letter».</p>
<p>فكِّر في إنتاج ملفات <span class="nodecor">PDF</span> مباشرةً باستخدام <span class="nodecor">pdflatex</span> (لا سيّما لمستخدمي <span class="nodecor">MiKTeX</span>). ومع ذلك، ينبغي استبدال رسوم <span class="nodecor">EPS</span> بنُسَخ <span class="nodecor">PDF</span>.</p>
<p>وإلّا، يُرجى إنتاج ملفات <span class="nodecor">PostScript</span> و<span class="nodecor">PDF</span> الخاصة بك باستخدام الأوامر التالية:</p>
<pre><code>dvips mypaper.dvi -t letter -Ppdf -G0 -o mypaper.ps
ps2pdf mypaper.ps mypaper.pdf</code></pre>

<h2 id="هوامش-في-latex">هوامش في LaTeX</h2>
<p>التزمْ بإعدادات الهوامش الافتراضية في قوالب النشر. تجنّب تغيير الهوامش يدوياً لضمان تطابق الإخراج مع متطلّبات المنصّة المستهدفة.</p>

<h3 id="بيان-urm" class="unnumbered">بيان URM</h3>
<p>يُقرّ المؤلِّفون بأنّ أحدهم على الأقلّ يُمثِّل معايير <span class="nodecor">URM</span> لمسار الأوراق الصغيرة في <span class="nodecor">ICLR 2024</span>.</p>

<h1 id="app:appA">الملحق أ</h1>
<p>الأوامر المستخدمة لنموذج اللغة الكبير في تجاربنا كما يلي:</p>
<ul>
  <li><p>أمر النظام: «أجِب عن الأسئلة استناداً إلى الفقرات المقدَّمة هنا فقط. لا تستخدم أيَّ معلوماتٍ أخرى. اجعل الإجابات موجزة، وقدِّم الإجابة دون مقدّمة».</p></li>
  <li><p>أمر المستخدم: «الفقرات: » + <code>context</code> + « الأسئلة: » + <code>query</code></p></li>
</ul>

<h1 id="app:appB">الملحق ب</h1>
<p>يحتوي هذا الملحقُ الرسومَ البيانية لتقدير الكثافة النووية (<span class="nodecor">KDE</span>) لدرجات التشابه الجيبي مقابل أطوال الجُمل، والتي تُظهِر زيادةً مصطنعةً في التشابه مع ازدياد الطول، وظهورَ توزيعاتٍ ثنائية القمّة عند تجاوز عتبة ~<span class="nodecor">200</span> كلمة على مستوى الاستعلام والوثيقة معاً.</p>

<h1 id="app:appC">الملحق ج - المواد التكميلية</h1>
<p>نوفر <a href="https://anonymous.4open.science/r/RAG_ICLR-55CB/README.md">مستودع Git مجهول</a> يحتوي على:</p>
<ul>
  <li><p>شيفرةٍ مصدريةٍ مجهولة</p></li>
  <li><p>توزيعِ التجارب مقابل الفرضيّات (لنتائجٍ كميةٍ موحَّدة)</p></li>
  <li><p>تفاصيلِ التجارب عبر <span class="nodecor">42</span> استفساراً و<span class="nodecor">7</span> فرضيّات</p></li>
</ul>
<p>بالإضافة إلى ذلك، نقدِّم تفاصيلَ حول الفرضيّات في الجدول [tab:observations] مع الاستفسارات النموذجية والنتائج المسترجعة والمولّدة.</p>
</main>
</body>
</html>